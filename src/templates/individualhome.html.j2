{% extends "parent.html.j2" %}
{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/reserve.css') }}">
    <link rel="stylesheet" type="text/css" href="/static/node_modules/smart-webcomponents/source/styles/smart.default.css" />
    
{% endblock %}


{% block content %} 
  <div class="contain">
    <!--- Title ------>
    <div class="house-title d-flex align-items-center justify-content-center">
        <h4><span>{{ home_data['homename'] }}</span> - <span>{{ home_data['enc_price'] }} / month / room</span></h4>
    </div>

    <!--- Scrollable Images --->
    <div class="wrapper d-flex align-items-center justify-content-center">
        <div class="card-group card-group-scroll">

        {% for img in home_data['homeimgs'] %}
            <div class="card">
                <img src="{{ img }}" class="card-img-top" alt="{{ home_data['homename'] }}" />     
            </div>
        {% endfor %}
        </div>
    </div>

    <!-- house information -->
    <div id='subbody' class="container row">
        <div class="col-lg-7 col-md-12">
          <ul class="nav nav-pills mb-3 nav-fill" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-desc" type="button" role="tab" aria-controls="pills-desc" aria-selected="true">Description</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-amenities" type="button" role="tab" aria-controls="pills-amenities" aria-selected="false">Amenities</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-host" type="button" role="tab" aria-controls="pills-host" aria-selected="false">Host</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-availability" type="button" role="tab" aria-controls="pills-availability" aria-selected="false">Availability</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-rooms" type="button" role="tab" aria-controls="pills-rooms" aria-selected="false">Rooms</button>
            </li>
          </ul>
          
          <div class="tab-content" id="pills-tabContent">
            <div class="tab-pane fade show active" id="pills-desc" role="tabpanel" aria-labelledby="pills-desc-tab">
              {{ home_data['homedescription']}} 
            </div>
            <div class="tab-pane fade" id="pills-amenities" role="tabpanel" aria-labelledby="pills-amenities-tab">
              <div class="row">

              {% for amenity in home_data['amenities'] %}
                <div class="col-sm-3">
                  <div class="row">
                    <div class="col-sm-3"><i class="fa-regular fa-circle fa-lg" style="color: rgb(15, 207, 15);"></i></div>
                    <div class="col-sm-9"><p>{{ home_data['amenities'][amenity] }}</p></div>              
                  </div>
                </div>
              {% endfor %}
                
              </div>
            </div>
            <div class="tab-pane fade" id="pills-host" role="tabpanel" aria-labelledby="pills-host-tab">
                <div class="row">
                  <div class="col-md-4" id="divImageMediaPreview">
                      <img src="{{ host_data['profileimageurl'] }}" class="rounded-circle" style="width: 100%; height: 100%;" alt="Avatar" />
                  </div>
                  <div class="col-md-4 col-sm-12">
                    <p>Name: </p>
                    <p>{{ host_data['firstname'] }} {{ host_data['lastname'] }}</p>
                    <p>Contact: </p>
                    <p>{{ host_data['phonenumber'] }}</p>
                    <p>Email: </p>
                    <p>{{ host_data['email'] }}</p>
                  </div>
                  <div class="col-md-4 col-sm-12">
                    <a href="/view_profile/owner/{{ host_data['nationalId'] }}">show more</a>
                  </div>   
                </div>
            </div>
            <div class="tab-pane fade" id="pills-availability" role="tabpanel" aria-labelledby="pills-availability-tab">
                <smart-calendar id="calendar" important-dates='["2023-05-27", "2023-05-28", "2023-05-29", "2023-05-30", "2023-05-31"]'>
                
                </smart-calendar>
            </div>
            <div class="tab-pane fade" id="pills-rooms" role="tabpanel" aria-labelledby="pills-rooms-tab">
              
                <p>Number of rooms: {{ home_data['numrooms'] }} </p>
                <p>Number of people: {{ home_data['numpeople'] }}</p>
                <p><b>Room Description</b> <br> {{ home_data['roomdescription'] }}</p>
              
            </div>
          </div>
        </div>
        
        <!-- Reserve Form and the house information -->
        
        <div class="col-md-1">
        </div>
        
        <div id="reservation" class="col-lg-4 col-md-12">
          <form class="w-full max-w-lg" action="{{ '/reserve/'+ home_data['homeId'] + '/' + home_data['encryptprice']  }}">
              <div class="row">
                <div class="col-6">
                    <div class="form-group">  
                        <label for="checkin">Check-In</label>
                        <div class="input-group">
                          <input type="date" class="form-control" id="password">
                        </div>
                    </div>
                </div>
                <div class="col-6">
                  <div class="form-group">
                      <label for="checkout">Check-Out</label>
                      <div class="input-group">
                        <input type="date" class="form-control" id="password"">
                      </div>
                  </div>
              </div>    
            </div>
            <div class="row">
              <div class="col-12">
                  <div class="form-group">
                      <label for="numrooms">Number of rooms</label>
                      <div class="input-group">
                    <input type="text" class="form-control" name="numrooms id="numrooms" placeholder="Enter number of rooms to reserve">
                    </div>
                  </div>
              </div>
          </div> 
          <div class="row">
            <div class="col-12">
                <div class="form-group">
                    <label for="firstname">Upload School Reference</label>
                    <div class="input-group">
                    <input type="file" class="form-control" id="guests" placeholder="Enter number of guests">
                    </div>
                </div>
            </div>
          </div>
          <div class="form-group">
                    <label for="text">Lets get to know you</label>
                    <br><a href="https://nyumbani.form.temperamentassessment">https://nyumbani...</a>
                </div> 
          <div class="row">
            <div class="col-2"></div>
            <div class="col-8">
                <div class="form-group">
                    <div class="input-group">
                    <input type="submit" class="form-control" id="submit" value="Reserve">
                    </div>
                </div>
            </div>
            <div class="col-2"></div>
          </div> 
          </form>
        </div>
      </div>
      <div class="footer">
        <p>Â© Copyright Nyumbani 2022</p>
      </div>
      </div>
    
{% endblock %}

{% block script %}
    <script type="module" src="/static/node_modules/smart-webcomponents/source/modules/smart.calendar.js"></script>
    <script src="{{ url_for('static', filename='js/reserve.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
{% endblock %} 
