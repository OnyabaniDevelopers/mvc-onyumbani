{% extends "parent.html.j2" %}

{% block head %}

    <title>All Homes</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link type="text/css"  rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}"/>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>

{% endblock %}

{% block style %}

<style>
    body {
        font-family: 'Montserrat', sans-serif;
    }

    .horizontal-list {
        list-style: none;
        padding: 0;
    }

    .horizontal-list li {
        display: inline-block;
        margin-right: 10px;
    }

    .navbar {
        margin-bottom: 0;
        border-radius: 0;
        padding: 0px;
    }

    .rounded-rectangle {
        border-radius: 15px;
        background-color: #D9D9D9;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        padding: 1%;
        margin-left: 6%;
    }

    .footer {
        position: fixed;
        left: 0;
        bottom: 0;
        width: 100%;
        background-color: #F6F6F6;
        color: black;
        text-align: center;
        padding: 0px;
    }

    .btn-success {
        border-radius: 15px;
    }

    .btn-danger {
        border-radius: 15px;
    }
</style>

{% endblock %}

{%block nav%}

     <ul class="horizontal-list">
        <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="{{ url_for('add_home') }} ">Add Home</a>
        </li>
    </ul>

{%endblock%}

{% block content %}

    <!-- section -->
  <div class="container-fluid">
    <div class="navbar-text col-sm-2">
      <p>LISTED HOMES</p>
    </div>
    <div class="row">
      <!-- Image Row -->

      {% for home_key, home  in homes.items() %}
        <div class="home-box col-lg-3 col-md-4 col-sm-6 col-xs-12 homediv">
          <div class="thumbnail">
            <a href="/view_home/{{ home.get('homeId')}} " style="text-decoration: none">
              <img src="{{home.get('homeimgs')[0]}}" alt="Lights" style="width:100%; height: 250px; border-radius: 20px; margin-bottom: 5%">
            </a>
            <div class="caption" id="homecaption">
              <p>{{home.get('homename')}}</p>
              <p>{{home.get('homeaddress')}}, {{home.get('city')}}, {{home.get('country')}}</p>
              <p>{{home.get('roomprice')}} / month / room</p>
            </div>
          </div>
        </div> 
      {% endfor %}
      
    </div>
  </div>

    
        <div class="row">
            <div class="col-md-12">
                <p style="text-align: center;">HOUSING APPLICATIONS</p>

                {% for appId, application in applications.items() %}
                <div class="row">
                    <div class="col-md-5 rounded-rectangle">
                        <div class="row">
                            <div class="col-md-3">
                                <div id="divImageMediaPreview">
                                    <img src="/static/pics/profile.png" class="rounded-circle" style="width: 100%; height: 20%;" alt="Avatar" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <p>Student</p>
                                <small>{{application['studentname']}}</small>
                                <small>Contact: {{application['studentcontact']}}</small>
                                <small>Email: {{application['applicant_email']}}</small>
                                <a href="/view_profile/student/{{ application['studentId'] }}"><small>show more</small></a>

                                {%if application['status'] == 'Host approval'%}
                                <div class="d-flex justify-content-md-end justify-content-center">
                                    <a href="/view_listed?change=disapprove&id={{appId}}" class="btn btn-danger" style="margin-right: 10%">disapprove</a>
                                    <a href="/view_listed?change=approve&id={{appId}}"" class="btn btn-success">approve</a>
                                </div>
                                {%endif%}
                            </div>
                            <div class="col-md-3">
                                <p>Home</p>
                                <small>{{homes[application['homeId']]['homename']}}</small>
                                <small>{{homes[application['homeId']]['homeaddress']}}</small>
                                <small>Amount: {{application['roomprice']}}</small>
                                <small>{{application['initdate']}} - {{application['enddate']}}</small>
                                <!--<p><small>show more</small></p>-->
                            </div>
                            <div class="col-md-3">
                                <p>Status</p>
                                <small>{{application['status']}}</small>
                                <!--<small>Payment made</small>
                                <small>Payment Confirmed</small>
                                <p><small>show more</small></p>3-->
                            </div>
                        </div>
                    </div>

                    {%endfor%}
                   <!-- <div class="col-md-5 rounded-rectangle mt-3 mt-md-0">
                        <div class="row">
                            <div class="col-md-3">
                                <div id="divImageMediaPreview">
                                    <img src="/static/pics/profile.png" class="rounded-circle" style="width: 100%; height: 20%;" alt="Avatar" />
                                </div>
                            </div>
                            <div class="col-md-3">
                                <p>Student</p>
                                <small>Ken West</small>
                                <small>Contact: 0546729202</small>
                                <small>Email: ra@gh.go</small>
                                <p><small>show more</small></p>
                                <div class="d-flex justify-content-md-end justify-content-center">
                                    <button type="button" class="btn btn-danger" style="margin-right: 10%">disapprove</button>
                                    <button type="button" class="btn btn-success">approve</button>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <p>Home</p>
                                <small>Marrets Place</small>
                                <small>Airport, Valley</small>
                                <small>Amount: Gh 2000</small>
                                <small>12/12/12 - 1/1/1</small>
                                <p><small>show more</small></p>
                            </div>
                            <div class="col-md-3">
                                <p>Status</p>
                                <small>Host approved</small>
                                <small>Payment made</small>
                                <small>Payment Confirmed</small>
                                <p><small>show more</small></p>
                            </div>
                        </div>
                    </div> -->
                </div>
            </div>
        </div>
    
{% endblock %}
