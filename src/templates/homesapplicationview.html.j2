{% extends "parent.html.j2" %}

{% block head %}

    <title>All Homes</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link type="text/css"  rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}"/>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>

{% endblock %}

{% block style %}

<style>
    .rounded-rectangle {
        border-radius: 15px;
        background-color: #D9D9D9;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        padding: 1%;
        margin-bottom: 20px;
    }

    .btn {
        border-radius: 15px;
    }
    
    .small{
        font-size: 13px
    }
</style>

{% endblock %}

{% block content %}

    <!-- section -->
  <div class="container-fluid">
    <div class="navbar-text col-sm-12">
      <p>LISTED HOMES</p>
      <ul class="horizontal-list">
        <li class="nav-item btn" style='background-color: black;'>
            <a class="nav-link active" style='color: white;' aria-current="page" href="{{ url_for('add_home') }} ">Add Home</a>
        </li>
      </ul>
    </div>
    <div id="main-body" class="row">
      <!-- Image Row -->
      {% for home_key, home  in homes.items() %}
        <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12 home-tabb">
          <a href="/view_home/{{ home.get('homeId')}}" style="text-decoration: none">
            <div class="home-image">
                <img src="{{home.get('homeimgs')[0]}}" alt="Lights" style="width:100%; height: 220px; border-radius: 20px; margin-bottom: 5%">         
            </div>
          </a>
          <div class="home-details">
            <p>{{home.get('homename')}}</p>
            <p>{{home.get('homeaddress')}}, {{home.get('city')}}, {{home.get('country')}}</p>
            <p>{{home.get('roomprice')}} / month / room</p>
          </div>
          <div class="d-flex justify-content-between">
            <a href="" class="">
                <span class="pencil">
                    <i class="fa-solid fa-pencil" style="color: #FF3062;"></i>
                </span>
            </a>
            <a href="challenges.html" class="far-right">
                <span class="cancel">
                    <i class="fa-sharp fa-solid fa-trash" style="color: #FF3062;"></i>
                </span>
            </a>
          </div>
        </div> 
      {% endfor %}  
    </div>
    </div>
        <p style="text-align: center;">HOUSING APPLICATIONS</p>
        <div class="row">
            {% for appId, application in applications.items() %}
                <div class="col-sm-12 rounded-rectangle">
                    <div class="row">
                        <div class="col-md-3">
                            <div style="text-align:center">
                                <img src="/static/pics/profile.png" class="rounded-circle" style="width: 50%; height: 20%;" alt="Avatar"/>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <p style='font-weight: bold'>Student</p>
                            <p class='small'>{{application['studentname']}}</p>
                            <p class='small'>Contact: {{application['studentcontact']}}</p>
                            <p class='small'>Email: {{application['applicant_email']}}</p>
                            <a href="/view_profile/student/{{ application['studentId'] }}"><p class='small'>show more</p></a>

                            {%if application['status'] == 'Host approval'%}
                            <div class="" style='margin-top: 10px'>
                                <a href="/view_listed?change=disapprove&id={{appId}}" class="btn btn-danger" style="margin-right: 10%">disapprove</a>
                                <a href="/view_listed?change=approve&id={{appId}}"" class="btn btn-success">approve</a>
                            </div>
                            {%endif%}
                        </div>
                        <div class="col-md-3">
                            <p style='font-weight: bold'>Home</p>
                            <p class='small'>{{homes[application['homeId']]['homename']}}</p>
                            <p class='small'>{{homes[application['homeId']]['homeaddress']}}</p>
                            <p class='small'>Amount: Ghc {{application['roomprice']}}</p>
                            <p class='small'>{{application['initdate']}} - {{application['enddate']}}</p>
                        </div>
                        <div class="col-md-3">
                            <p style='font-weight: bold'>Status</p>
                            <small>{{application['status']}}</small>
                        </div>
                    </div>
                </div>
            {%endfor%}
        </div>
    
{% endblock %}
